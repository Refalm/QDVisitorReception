name: CI

on: push

jobs:
  build:
    runs-on: ubuntu-latest

    steps:

    - uses: actions/checkout@v2
      name: ðŸ“¥ Checkout

    - name: ðŸ’¿ Setup PHP 8.2
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.2'
        tools: vimeo/psalm, phpcs, composer

    - name: ðŸ’¿ Setup PHP dependencies
      run: |
        composer install --prefer-dist --no-progress --no-ansi --no-interaction
        echo "${PWD}/vendor/bin" >> $GITHUB_PATH

    - uses: cschleiden/actions-linter@v1
      name: ðŸ§ª Workflow
      with:
        workflows: '[".github/workflows/*.yaml"]'

    - name: ðŸ§ª Psalm
      run: psalm --output-format=github

    - name: ðŸ§ª PHP Codesniffer
      uses: wearerequired/lint-action@v2
      with:
        php_codesniffer: true
        # Optional: Ignore warnings
        php_codesniffer_args: "-n"
